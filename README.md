# FRS_Project(금융 추천 서비스)

> 금융 API를 사용하여 사용자에게 맞춤형 예금, 적금을 추천해주는 사이트
>
> 금융 API와 사용자에게 받은 데이터를 토대로, 사용자와 비슷한 데이터를 가진 다른 사람들이 자주 가입하는 상품을 추천하거나
> 간단한 미니게임을 통해 사용자에게 상품을 추천해주는 알고리즘 구현

## 개발 기간
> 2023.05.17 ~ 23.05.25

## 📌 시작 전 확인 사항
### ✔️ Front-end
> Front를 실행하기 위해 필요한 패키지들의 설치
```
$ cd Front/frs-Front/
$ npm install
$ npm install bootstrap-vue
$ npm install axios
```

### ✔️ Back-end
> Back을 실행하기 위해 필요한 패키지들의 설치
```
$ cd Back/frs_back/
$ python -m vevn venv
$ source venv/Script/activcate
$ pip install -r requirements.txt
$ python manage.py loaddata user_data.json
$ python manage.py makemigrations
$ python manage.py migrate
```

## 1. 📂 개요

### 1-1 팀원 설명
김보석(팀장) : Front-end & Back-end
- Vue 클라이언트 구현
- Django 서버 구현
- Vue - django 연동
- css 모델링

박승희(팀원) : Front-end
- Vue 클라이언트 구현
- Css 모델링
- Web Design

### 1-2 주요 기능
> 시작 페이지
```
1. 메인 화면생성
2. 로그인 여부에 따른 NavBar 표시 변경
```
<br>

> 로그인 & 회원가입
```
1. 회원 가입 시 사전 정보 선택적 입력
2. 로그인 여부 토큰을 통해 확인
```
<br>

> 예금 & 적금 조회 서비스
```
1. 시중 은행의 예금 & 적금 상품 리스트 조회
2. 가입 기간에 따른 금리 정보 제공
3. 예금 & 적금 추천 알고리즘 페이지 제공
4. 상품 클릭 시 해당 은행 위치 서비스 제공 (카카오 API)
5. 즐겨찾기 버튼을 통해 상품능저장 가능
```
<br>

> 예금 & 적금 추천 알고리즘
```
1. 2가지의 추천 서비스 제공
2. 다른 사용자들의 정보와 사용자의 사전 입력 정보를 통한 추천 서비스
3. 미니게임을 통한 사용자 맞춤 서비스 제공
```
<br>

> 커뮤니티
```
1. 자유롭게 토론할 수 있는 자유 게시판 기능 제공
2. 게시판 별 댓글 기능 제공
3. 자주 묻는 질문 게시판 제공
4. 1:1 문의 게시판 제공
```
<br>

> 환율 계산기
```
1. 현재 환율에 따른 원하는 나라의 환율 금액 계산
2. 환율 서비스 제공을 위해 환율 API 사용
```
<br>

> 은행 지도
```
1. 원하는 지역의 은행 위치 검색 서비스 제공
2. 선택 박스를 통해 위치 선택 가능
```
<br>

> 개인 프로필 페이지
```
1. 사용자의 정보 조회
2. 선택적 정보에 대한 정보 수정 기능 제공
3. 사용자가 즐겨찾기로 선택한 상품 확인 가능
```
<br>

### 1-3 컴포넌트 구조
![componet](https://github.com/edder773/FRS_Project_/assets/58801719/1405ac84-597c-45d6-bb66-57c2a98e1a96)

### 1-4 ERD model
![ERD](https://github.com/edder773/FRS_Project_/assets/58801719/f0e4b2e5-d13d-493d-9d89-8d49867248de)

# 2. ⚒️ 추천 알고리즘
![recommend](https://github.com/edder773/FRS_Project_/assets/58801719/b4ad6c9f-8b61-4580-9d57-a0d363209cc2)

> 예금 정보 비교 탭에서 알고리즘 추천 버튼을 통해 2개의 추천 서비스 이용 가능 구현
> 2개의 추천 서비스 모두 사용자의 제공 정보 기반 추천 알고리즘

### 2-0 개요
> - 알고리즘을 추천하기 위해 10000개의 더미 데이터 사용
> - 더미 데이터를 기반으로 추천 & 사용자의 선택에 의한 추천

### 2-1 나와 비슷한 조건을 가진 다른 사람들이 선택한 상품 추천 알고리즘
![recommend2](https://github.com/edder773/FRS_Project_/assets/58801719/ff534200-6011-478a-b9de-46f86bec5a22)

> - 사용자가 사전에 입력한 나이, 연봉, 자산을 근거로 나와 가까운 범위를 가진 사람의 데이터를 추출
> - django에서 기본으로 제공하는 Q 사용
> - 사용자의 사전 데이터를 기반으로 분류하므로, 나이, 연봉, 자산 등의 

```
# 추천 알고리즘 주요 코드
# 나를 제외한 다른 가입자의 나이 범위 / 수입 범위 / 자산 범위를 임의로 지정해서 해당 범위 안에 있는 사용자 추천

similar_users = User.objects.filter(
        Q(age__range=(age_min, age_max)) &
        Q(annual_income__range=(income_min, income_max)) &
        Q(assets__range=(assets_min, assets_max)) &
        ~Q(id=current_user.id)
```


### 2-2 사용자의 선택을 기반으로 한 상품 추천 알고리즘
![recommendtest](https://github.com/edder773/FRS_Project_/assets/58801719/faece6f0-cb38-4e32-896c-5fe19d02af71)

> - 사용자에게 8개의 질문과 선택지를 제공하여 자신의 취향을 파악하도록 구현
> - 사용자의 선택을 기반으로 score를 측정
> - score를 기반으로 임의의 조건을 사용하였고, filter를 통해 해당 상품을 추천하도록 구현
> - score에 따른 filter로 추천한 데이터는 상품 중 최대 금리를 보장하는 상품을 추천

```
# 추천 알고리즘 주요 코드
# 가장 높은 금리를 보장하도록 하는 코드

let maxIntrRate2Option = null
let maxIntrRate2 = -Infinity
for (const option of filteredOptions) {
  if (option.intr_rate2 > maxIntrRate2) {
    maxIntrRate2 = option.intr_rate2
    maxIntrRate2Option = option
  }
}
```

# 3. 💪 대표 기능

### 3-1 메인 페이지
![1234](https://github.com/edder773/FRS_Project_/assets/58801719/c4a70fee-5737-485e-93b6-0e1dc90bcc76)

> - carousel 기능을 활용하여 주요 기능인 예금 추천 & 적금 추천 페이지 바로가기 화면 제공
> - 환율 계산기와 사용자 맞춤형 서비스(추천) 페이지 바로가기 화면 제공
> - 홈페이지, 예적금 비교, 은행찾기, 게시판 페이지로 이동할 수 있는 NavBar기능 제공
> - 환율계산 클릭시 slide 기능을 통해 좌측에서 환율 계산 창 표시
> - 로그인 & 회원가입 클릭시 모달을 통해 회원 가입과 로그인 가능
> - 로그인 후 로그아웃 기능 활성화 및 프로필 페이지 활성화

### 3-2 예/적금 비교 페이지
![2345](https://github.com/edder773/FRS_Project_/assets/58801719/dc22da9e-e78f-4bc0-96ee-642e724f292f)
> - API를 통해 django로 저장된 데이터들 예/적금에 맞춰 페이지 출력
> - 예금비교와 적금비교 페이지를 각각 구성하여 사용자가 원하는 형태를 찾아볼 수 있게 구현
> - 각 데이터들을 은행 이름, 상품 이름을 가입 기간에 따른 금리가 보이도록 구성
> - 원하는 데이터 클릭시 지도를 통해 해당 은행의 위치를 찾아볼 수 있게 구성 및 상세 데이터 제공
> - 상품 가입 기간과 은행 이름으로 원하는 정보만 필터링 가능
> - 화면 좌측의 상품 추천을 통해 추천 받을 방법 선택 가능

### 3-3 은행 찾기 페이지
![3456](https://github.com/edder773/FRS_Project_/assets/58801719/de054b3d-911f-4c4b-a7d2-fe21fa1d516e)
> - 카카오 API를 이용하여 원하는 은행의 위치 찾기 기능 제공
> - 원하는 시, 구의 은행 찾기 가능

### 3-4 게시판 페이지
![4567](https://github.com/edder773/FRS_Project_/assets/58801719/a43b75ed-05f7-4373-803f-db4e7224ef6a)
> - 커뮤니티 기능 제공을 위한 게시판 페이지 제공
> - 로그인한 유저만 접근 가능 및 글 작성 가능
> - 작성한 글을 확인가능하고, 자신의 글만 수정 및 삭제 가능
> - 작성한 글에 대해 댓글 기능 제공, 자신의 댓글만 수정 및 삭제 가능
> - 자주 묻는 질문란을 통해 사용자 가이드 제공
> - 1:1 문의 게시판 제공

### 3-5 프로필 페이지
![profile](https://github.com/edder773/FRS_Project_/assets/58801719/343020ce-c987-47a0-9ad1-1cf400e1ddf7)
> - 현재 가입한 내 상세 정보 제공
> - 수정하기 기능을 통해 선택사항으로 받은 데이터들 수정 가능
> - 내가 가입한 상품 리스트 제공

# 4 🐛 버그 수정 및 디버깅

### 1. 가입한 상품 테이블 
> DB에서 ManyToManyField를 이용해서 가입한 상품을 저장하는 과정에서, 정상적으로 DB에는 들어가나 새로고침하면 저장된 DB가 사라지는 버그가 발생하였다. 원인은 API를 가져오는 과정에서 시간에 따라 데이터가 바뀌는 점을 고려하여 매번 기존 예금, 적금 데이터를 삭제하는 과정으로 인해 발생하는 버그였다.
> 이를 해결하기 위해서 기존 데이터를 삭제하지 않는 방향으로 수정하여 가입한 상품을 정상적으로 저장할 수 있도록 구성하였다.

### 2. 상품 상세페이지
> 상품의 상세페이지를 b-Modal로 구성하는 과정에서 처음에는 Bootstrap-Vue를 이용하지 않고 구현해서 정상적으로 동작했다. 하지만 Bootstrap-Vue를 import해서 사용하는 과정에서 기존에 CSS를 통해 작성한 부분이 정상적으로 작동하지 않는 버그가 발생하였다.
> Bootstrap-Vue로 바꾸면서 기존 CSS를 전부 수정하였더니 b-Modal이 정상적으로 작동하였다. 다만, 기존에 정상 작동하던 카카오 맵이 깨지는 현상이 발생하였다. 3일간의 디버깅 과정을 통해서 수정을 시도했다. 원하는 형태로 지도가 동작하지 않았지만, 상세 페이지에 대한 정보는 기존에 계획한 구조로 정상 작동하였다.

### 3. 예금&적금 페이지
> 상품의 예금과 적금을 표로 제공하는 과정을 구현하는 과정에서, 최초 렌더링시에 전체 화면이 나타나지 않는 버그가 발생하였다. 또한 필터링 과정에서도 원하는 형태로 필터링이 되지않는 버그가 계속 발생했다.
> API를 가져오는 동안 다른 함수가 먼저 동작해서 발생한 오류로 해결하기 위해 비동기적으로 구현하였고, 필터링도 은행, 가입기간을 기준으로 분류할 수 있게 구현하였다.

# 5. 🎈 느낀점

### 김보석
> 백엔드 개발자를 목표하는 만큼 백엔드를 집중적으로 구성해서 첫 프로젝트를 진행할 계획이었다. <br>
> 백엔드를 구성하고나서 프론트와 연동하는 과정에서 데이터의 전달이 처음에는 원하는 형태로 되지 않았다. axios와 postman을 많이 사용해서 데이터를 어떻게 접근하면 좋을지에 대한 고민을 많이 했다. <br>
> 백엔드 구성은 프로젝트 전체 시간에 비해 목표 시간보다 빠르게 구성했고, 프론트에서 데이터를 접근하는 것을 전반적으로 직접 구현했다. <br>
> 추천하는 알고리즘을 어떻게 구현하면 좋을까? 라는 생각에서 요즘 유행하는 심리테스트처럼 구성을 해보았고, 전반적으로 프론트에서 디자인하고 구상하였다. <br>
> 추천 알고리즘을 numpy를 이용해서 처음에 구성했으나, 코드를 바꾸는 과정에서 에러가 발생해 django에서 제공하는 Q를 import해서 특정 구간에 따라 나눠 구성할 수 있게 했는데, 좀 더 다양하게 DB를 다룰 수 있었다면 알고리즘을 잘 짤 수 있었을거 같은데 아쉬움이 많이 남는다. <br>
> 전반적인 프론트엔드 & 백엔드 파트를 맡아서 작업을 진행하였고, 덕분에 Vue와 Django 프레임워크에 많이 적응하는데 도움이 많이 됐다. <br>


### 박승희
> 백엔드와 프론트엔드를 모두 배운 뒤에 제대로 진행해보는 첫 프로젝트였다. <br>
> 백엔드보다는 프론트엔드에 흥미가 생겨 프론트엔드를 구현해보기로 했는데, 생각보다 쉽지 않았다. 구현해야하는 기능도 어려웠지만 잘 구현한 기능을 사용자가 보기 쉽게 구현하는 것도 쉬운 게 아니었다. <br>
> 디자인은 잘 구현되어 있는 여러 홈페이지의 css를 참고해봤지만 공식 문서와 구글링(+chatgpt)이 가장 도움이 된 거 같다. <br>
> 시간 배분을 나름 잘 하면서 진행한다고 생각했는데, 너무 부족해서 나중에는 급하게 구현하느라 고생했다. <br>
> 이 FRS 프로젝트에 정이 생겨서 프로젝트가 끝나더라도 시간에 쫓겨 하지 못한 남은 작업들을 모두 해내고 싶다.<br>
